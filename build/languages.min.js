/* GPLv3.0 2016 chendianbuji@gmail.com */(function(e){window.Languages=e(),(new MutationObserver(function(e){e.map(function(e){e.target!="[object HTMLBodyElement]"&&e.target!="[object HTMLScriptElement]"&&(e.removedNodes.length!=0||e.addedNodes.length!=0)&&Languages.update()})})).observe(document.querySelector("body"),{attributes:!1,childList:!0,characterData:!1,subtree:!0})})(function(){function s(){let e=new Map,n,r,s;return{init:function(){return s=document.querySelectorAll("[lang]:not(title)"),n=document.querySelectorAll("title[lang]"),function(o){t(s).forEach(function(t,n){e.has(t)||e.set(t,t.style.display),t.lang!=o?t.style.display="none":(t.style.display=e.get(t),e.delete(t))}),titles_container=n[0].parentNode,t(n).forEach(function(e,t){e.lang==o&&(titles_container.removeChild(e),titles_container.insertBefore(e,n[t==0?1:0]))}),n=document.querySelectorAll("title[lang]"),i(o,r),r=o}},update:function(){return function(){let n=s=document.querySelectorAll("[lang]:not(title)");t(n).forEach(function(t,n){e.has(t)||e.set(t,t.style.display),t.lang!=r?t.style.display="none":e.delete(t)});let i=new Map(e);t(n).forEach(function(e,t){i.has(e)&&i.delete(e)}),t(i).forEach(function(t,n){e.has(t)&&e.delete(t)})}}}}let e=new s,t=function(e){return Array.prototype.slice.call(e)},n=function(e,n,r){return function(i){t(n).map(function(t,n){t.lang==r&&i(t)&&(e.selectedIndex=n)})}},r=function(e,n){let r=[],i=e.querySelectorAll("option");t(i).map(function(e){r.push(e)}),t(i).map(function(t){e.removeChild(t)}),r.filter(function(e){return e.lang==n}).map(function(t){e.appendChild(t)}),r.filter(function(e){return e.lang!=n}).map(function(t){e.appendChild(t)})},i=function(e,i){let s=document.querySelectorAll("select");t(s).map(function(t){e!=i&&r(t,e)}),t(s).map(function(r){let i=r.querySelectorAll("option"),s=n(r,i,e);s(function(e){return!!e.selected}),t(i).filter(function(t){return t.lang==e}).every(function(e){return e.selected==0})&&s(function(e){return!!e.getAttribute("selected")})})};return{select:e.init(),update:e.update()}});